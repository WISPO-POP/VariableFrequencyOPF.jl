<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Variable Frequency OPF · VariableFrequencyOPF.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://WISPO-POP.github.io/VariableFrequencyOPF.jl/opf_examples/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">VariableFrequencyOPF.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href>Variable Frequency OPF</a></li><li><a class="tocitem" href="../comparison_examples/">Comparing Upgrades</a></li><li><a class="tocitem" href="../frequency_examples/">Analyzing Frequency Dependence</a></li></ul></li><li><a class="tocitem" href="../functions/">Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Variable Frequency OPF</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Variable Frequency OPF</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/WISPO-POP/VariableFrequencyOPF.jl/blob/master/docs/src/opf_examples.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h3 id="Example-workflow-for-a-low-frequency-AC-upgrade"><a class="docs-heading-anchor" href="#Example-workflow-for-a-low-frequency-AC-upgrade">Example workflow for a low frequency AC upgrade</a><a id="Example-workflow-for-a-low-frequency-AC-upgrade-1"></a><a class="docs-heading-anchor-permalink" href="#Example-workflow-for-a-low-frequency-AC-upgrade" title="Permalink"></a></h3><h4 id="Solving-the-OPF-without-upgrades"><a class="docs-heading-anchor" href="#Solving-the-OPF-without-upgrades">Solving the OPF without upgrades</a><a id="Solving-the-OPF-without-upgrades-1"></a><a class="docs-heading-anchor-permalink" href="#Solving-the-OPF-without-upgrades" title="Permalink"></a></h4><p>We begin by solving the optimal power flow for a network with a single, fixed frequency. Consider the 5 bus network shown here:</p><p><img src="../examples/fig/5bus.svg" alt="5 bus network"/></p><p>It is represented in a MATPOWER case file: <a href="https://github.com/WISPO-POP/VariableFrequencyOPF.jl/test/data/case5/base/case5.m">case5.m</a></p><p>For this example, we put this file in a folder called <code>base</code> inside a parent folder <code>case5</code> for all the cases we&#39;ll consider here. This will be the base network without any upgrades.</p><p>Because the functions in this package expect networks which may have variable frequency portions, we need to specify some details about frequency. This is done by creating a file in the same folder, called <code>subnetworks.csv</code>. This file must specify the name of the network data file, whether it is a variable frequency network, and at what frequency all the parameters in the network data file are defined. If the frequency is variable, it also must specify the upper and lower limits of the frequency.</p><table><tr><th style="text-align: right">index</th><th style="text-align: right">file</th><th style="text-align: right">variable_f</th><th style="text-align: right">f_base</th><th style="text-align: right">f_min</th><th style="text-align: right">f_max</th></tr><tr><td style="text-align: right">1</td><td style="text-align: right">case5.m</td><td style="text-align: right">false</td><td style="text-align: right">60</td><td style="text-align: right"></td><td style="text-align: right"></td></tr></table><p>Now we can solve the standard AC OPF for this network, with the objective of minimizing cost:</p><pre><code class="language-julia">using VariableFrequencyOPF

data_folder = &quot;test/data/case5/base/&quot;
objective = &quot;mincost&quot;

solution = VariableFrequencyOPF.multifrequency_opf(data_folder, objective)

# The first element in the solution output is a dictionary containing several important results.
results_dict = solution[1]
println(results_dict)</code></pre><p>The output looks like this. The result values are in arrays, where each element corresponds to a subnetwork. We only have one subnetwork here.</p><pre><code class="language-julia">Dict{String,Any} with 11 entries:
  &quot;frequency (Hz)&quot; =&gt; [60.0]
  &quot;total loss&quot;     =&gt; [0.0519209]
  &quot;converter loss&quot; =&gt; [0.0]
  &quot;status&quot;         =&gt; LOCALLY_SOLVED
  &quot;CPU time (s)&quot;   =&gt; 0.826
  &quot;iterations&quot;     =&gt; 28
  &quot;total time (s)&quot; =&gt; 0.860499
  &quot;subnet&quot;         =&gt; [1]
  &quot;cost&quot;           =&gt; [17551.9]
  &quot;generation&quot;     =&gt; [10.0519]
  &quot;line loss&quot;      =&gt; [0.051921]</code></pre><h4 id="Upgrading-a-line-to-low-frequency-AC"><a class="docs-heading-anchor" href="#Upgrading-a-line-to-low-frequency-AC">Upgrading a line to low frequency AC</a><a id="Upgrading-a-line-to-low-frequency-AC-1"></a><a class="docs-heading-anchor-permalink" href="#Upgrading-a-line-to-low-frequency-AC" title="Permalink"></a></h4><p>Now we would like to upgrade one line to low frequency AC (LFAC) and solve the OPF with frequency as a variable. An upgrade of line 2 will make this line into its own variable frequency subnetwork, like this:</p><p><img src="../examples/fig/5bus_lfac.svg" alt="5 bus network"/></p><p>To present this data to VariableFrequencyOPF, we need to create a new network file for the subnetwork, modify the original, add a line to <code>subnetworks.csv</code> and specify some details about how the subnetworks connect through another file, <code>interfaces.csv</code>.</p><p>The function <code>upgrade_branches</code> takes care of all of these steps for us.</p><pre><code class="language-julia">base_network = &quot;test/data/case5/base/case5.m&quot;
output_location = &quot;test/data/case5/&quot;
base_frequency = 60.0
branches_to_upgrade = [2]
# We neglect converter losses in this example
noloss = true

VariableFrequencyOPF.upgrade_branches(
    base_network,
    output_location,
    base_frequency
    indices=branches_to_upgrade,
    noloss=noloss
)</code></pre><p>This creates a new folder inside <code>case5</code> called <code>br2</code>. In this folder, we have <code>case5.m</code> with line 2 removed and a new network file, <code>lfac_case5.m</code>, which has two LFAC buses and the line which was formerly line 2 between them. We also have <code>subnetworks.csv</code> with a new row:</p><table><tr><th style="text-align: right">index</th><th style="text-align: right">file</th><th style="text-align: right">variable_f</th><th style="text-align: right">f_base</th><th style="text-align: right">f_min</th><th style="text-align: right">f_max</th></tr><tr><td style="text-align: right">1</td><td style="text-align: right">case5.m</td><td style="text-align: right">false</td><td style="text-align: right">60</td><td style="text-align: right"></td><td style="text-align: right"></td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">lfac_case5.m</td><td style="text-align: right">true</td><td style="text-align: right">60</td><td style="text-align: right">0.1</td><td style="text-align: right">100</td></tr></table><p>This allows the frequency to vary between 0.1 and 100 Hz in the LFAC subnetwork.</p><p>We also have a new file, <code>interaces.csv</code>, specifying some details of the connections between the subnetworks. We set the converter losses to zero in this example, but we could specify any of these parameter values to model our converters and any filter or transformer branches connected to it. We can also specify the operating limits on current and voltage, respectively, of the converters with <code>imax</code> and <code>vmax</code>.</p><table><tr><th style="text-align: right">index</th><th style="text-align: right">subnet_index</th><th style="text-align: right">bus</th><th style="text-align: right">imax</th><th style="text-align: right">vmax</th><th style="text-align: right">c1</th><th style="text-align: right">c2</th><th style="text-align: right">c3</th><th style="text-align: right">sw1</th><th style="text-align: right">sw2</th><th style="text-align: right">sw3</th><th style="text-align: right">M</th><th style="text-align: right">smax</th><th style="text-align: right">R</th><th style="text-align: right">X</th><th style="text-align: right">G</th><th style="text-align: right">B</th><th style="text-align: right">transformer</th><th style="text-align: right">tap</th><th style="text-align: right">shift</th></tr><tr><td style="text-align: right">1</td><td style="text-align: right">1</td><td style="text-align: right">1</td><td style="text-align: right">40</td><td style="text-align: right">1.1</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0.9</td><td style="text-align: right">50</td><td style="text-align: right">1.00E-05</td><td style="text-align: right">0.001</td><td style="text-align: right">0</td><td style="text-align: right">0.0001</td><td style="text-align: right">FALSE</td><td style="text-align: right">1</td><td style="text-align: right">0</td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">1</td><td style="text-align: right">4</td><td style="text-align: right">40</td><td style="text-align: right">1.1</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0.9</td><td style="text-align: right">50</td><td style="text-align: right">1.00E-05</td><td style="text-align: right">0.001</td><td style="text-align: right">0</td><td style="text-align: right">0.0001</td><td style="text-align: right">FALSE</td><td style="text-align: right">1</td><td style="text-align: right">0</td></tr><tr><td style="text-align: right">1</td><td style="text-align: right">2</td><td style="text-align: right">1</td><td style="text-align: right">40</td><td style="text-align: right">1.1</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0.9</td><td style="text-align: right">50</td><td style="text-align: right">1.00E-05</td><td style="text-align: right">0.001</td><td style="text-align: right">0</td><td style="text-align: right">0.0001</td><td style="text-align: right">FALSE</td><td style="text-align: right">1</td><td style="text-align: right">0</td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">2</td><td style="text-align: right">2</td><td style="text-align: right">40</td><td style="text-align: right">1.1</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0</td><td style="text-align: right">0.9</td><td style="text-align: right">50</td><td style="text-align: right">1.00E-05</td><td style="text-align: right">0.001</td><td style="text-align: right">0</td><td style="text-align: right">0.0001</td><td style="text-align: right">FALSE</td><td style="text-align: right">1</td><td style="text-align: right">0</td></tr></table><p>Now we can solve the OPF for this network:</p><pre><code class="language-julia">data_folder = &quot;test/data/case5/br2/&quot;
objective = &quot;mincost&quot;

solution = VariableFrequencyOPF.multifrequency_opf(data_folder, objective)

# The first element in the solution output is a dictionary containing several important results.
results_dict = solution[1]
println(results_dict)</code></pre><h3 id="Solve-the-OPF-for-a-network-with-a-variable-frequency-(low-frequency-AC)-portion"><a class="docs-heading-anchor" href="#Solve-the-OPF-for-a-network-with-a-variable-frequency-(low-frequency-AC)-portion">Solve the OPF for a network with a variable frequency (low frequency AC) portion</a><a id="Solve-the-OPF-for-a-network-with-a-variable-frequency-(low-frequency-AC)-portion-1"></a><a class="docs-heading-anchor-permalink" href="#Solve-the-OPF-for-a-network-with-a-variable-frequency-(low-frequency-AC)-portion" title="Permalink"></a></h3><p>Consider a power system which is divided into two areas connected by AC-AC converters: one operates at a fixed frequency of 60 Hz, and the other is a multi-terminal low frequency AC network, whose frequency can be chosen. In the directory <code>test/data/case14_twoarea</code> is data for a modified IEEE 14 bus network which fits this paradigm, as drawn here, with the variable frequency portion in blue:</p><p><img src="../examples/fig/14bus_twoarea.svg" alt="14 bus network with LFAC"/></p><p>In this example, we solve the OPF for this case, and we print the termination status, generation cost and optimal frequencies (The frequency of the standard part of the network is fixed at 60 Hz, and the frequency of the other part is allowed to vary between 1.0 and 100.0 Hz).</p><pre><code class="language-julia">using VariableFrequencyOPF

data_folder = &quot;test/data/case14_twoarea/two_area/&quot;
objective = &quot;mincost&quot;

solution = VariableFrequencyOPF.multifrequency_opf(data_folder, objective)

results_dict = solution[1]

# Print results
println(&quot;Status:&quot;)
println(results_dict[&quot;status&quot;])
println(&quot;\nCost:\n==============================&quot;)
println(&quot;Variable frequency subnetwork:&quot;)
println(results_dict[&quot;cost&quot;][1])
println(&quot;Fixed frequency subnetwork:&quot;)
println(results_dict[&quot;cost&quot;][2])
println(&quot;\nFrequency:\n==============================&quot;)
println(&quot;Variable frequency subnetwork:&quot;)
println(results_dict[&quot;frequency (Hz)&quot;][1])
println(&quot;Fixed frequency subnetwork:&quot;)
println(results_dict[&quot;frequency (Hz)&quot;][2])</code></pre><p><strong>output:</strong></p><pre><code class="language-julia">Status:
LOCALLY_SOLVED

Cost:
==============================
Variable frequency subnetwork:
7565.237470495639
Fixed frequency subnetwork:
553.6125608844086

Frequency:
==============================
Variable frequency subnetwork:
1.0
Fixed frequency subnetwork:
60.0</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../comparison_examples/">Comparing Upgrades »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 21 June 2021 17:39">Monday 21 June 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
