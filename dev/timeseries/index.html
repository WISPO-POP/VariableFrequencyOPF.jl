<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>- · VariableFrequencyOPF.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://WISPO-POP.github.io/VariableFrequencyOPF.jl/timeseries/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">VariableFrequencyOPF.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../opf_examples/">Variable Frequency OPF</a></li><li><a class="tocitem" href="../comparison_examples/">Comparing Upgrades</a></li><li><a class="tocitem" href="../frequency_examples/">Analyzing Frequency Dependence</a></li></ul></li><li><a class="tocitem" href="../functions/">Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>-</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>-</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/WISPO-POP/VariableFrequencyOPF.jl/blob/master/docs/src/timeseries.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h3 id="time-series-for-Variable-Frequency-OPF"><a class="docs-heading-anchor" href="#time-series-for-Variable-Frequency-OPF">time-series for Variable-Frequency OPF</a><a id="time-series-for-Variable-Frequency-OPF-1"></a><a class="docs-heading-anchor-permalink" href="#time-series-for-Variable-Frequency-OPF" title="Permalink"></a></h3><h4 id="Project-description"><a class="docs-heading-anchor" href="#Project-description">Project description</a><a id="Project-description-1"></a><a class="docs-heading-anchor-permalink" href="#Project-description" title="Permalink"></a></h4><p>The project is based on the Variablefrequency-opf project. In the project, we use the time-series data form the dataset of RTS_GMLC system. (add the link)</p><p><img src="../flowchart_time_series.PNG" alt="flowchart"/> In the project, we basically parse the RTS<em>GMLC data with the default RTS</em>GMLC network. (here I named the output dictionary “hour<em>data”). Each entry of the “hour</em>data” is a whole copy of the original RTS<em>GMLC dictionary combined with the time-series data at that specific time point. Then we generate the system of subnetworks (hour</em>mn<em>data) using make</em>mn<em>data. These networks are the data for optimization. We input each time step of hour</em>mn<em>data into multifrequency</em>opf by a for-loop and store the output in a similar structure as &quot;hour<em>mn</em>data&quot;.</p><p>After we have the optimization results, the data can be plotted by using the function “multi_plot”, with flexibility on range of data and mode of plot.</p><h4 id="Function-description-and-Examples"><a class="docs-heading-anchor" href="#Function-description-and-Examples">Function description &amp; Examples</a><a id="Function-description-and-Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Function-description-and-Examples" title="Permalink"></a></h4><h5 id=".-hour_parse:"><a class="docs-heading-anchor" href="#.-hour_parse:">1. hour_parse:</a><a id=".-hour_parse:-1"></a><a class="docs-heading-anchor-permalink" href="#.-hour_parse:" title="Permalink"></a></h5><pre><code class="nohighlight hljs">hour_parse(month_st, day_st, period_st, month_en, day_en, period_en, folder)</code></pre><p>This function uses the base network “RTS<em>GMLC.m”, the network file information (<code>subnetworks.csv</code> in &#39;folder&#39;) and the time-series data (in <code>folder</code>) to generate networks for optimization for a single case. This function is used in `hour</em>opf` function described below in this project, so it will not shown in the complete example at the end of this chapter.</p><h6 id="Arguments:"><a class="docs-heading-anchor" href="#Arguments:">Arguments:</a><a id="Arguments:-1"></a><a class="docs-heading-anchor-permalink" href="#Arguments:" title="Permalink"></a></h6><ul><li><code>month_st</code>: the month to start</li><li><code>day_st</code>: the day to start</li><li><code>period_st</code>: the hour to start</li><li><code>month_en</code>: the month that ends parsing</li><li><code>day_en</code>: the month that ends parsing</li><li><code>period_en</code>: the month that ends parsing</li></ul><p>(here the periods need to be chosen corresponding to the data set use in the future)</p><ul><li><code>folder</code>: the folder containing the time-sereis data and <code>subnetworks.csv</code> of one single case (For example I can set it to be <code>time_series/enum_net/br1</code>)</li></ul><h5 id=".1.-hour*opf-(hour*opf_modified):"><a class="docs-heading-anchor" href="#.1.-hour*opf-(hour*opf_modified):">2.1. hour<em>opf (hour</em>opf_modified):</a><a id=".1.-hour*opf-(hour*opf_modified):-1"></a><a class="docs-heading-anchor-permalink" href="#.1.-hour*opf-(hour*opf_modified):" title="Permalink"></a></h5><pre><code class="nohighlight hljs">function hour_opf(month_st, day_st, period_st, month_en, day_en, period_en,
      folder:: String,
      subnet_folder:: String,
      output_folder::String,
      obj::String,
      gen_areas = [],
      area_transfer = [],
      plot_results::Bool = true,
      print_results::Bool = false)</code></pre><p>This function uses the similar structure of <code>multi-frequency-opf</code> with some additional arguments. Inside the function, we input each time step of hour<em>mn</em>data into multifrequency<em>opf by a for-loop and store the output in a similar data structure as hour</em>mn<em>data. The output data is then stored into <code>.json</code> file in the specified `output</em>folder<code>. The output files are of three types: -</code>binding<em>constraints<code>: the cosntriants -</code>opt</em>net<code>: optimal network result of that sub-network case during the specific time period -</code>res_summary`: optimal network result of that sub-network case during the specific time period The names are also specified to subnet numbers and periods. For exmaple,</p><pre><code class="nohighlight hljs">res_summary_br10_(1.1.1__12.31.24).json</code></pre><p>is the res_summary file for branch 10 optimized during the period of 1AM, Jan 1st to 12PM Dec 31st.</p><p><code>hour_opf</code> is in default to run for the whole year period for the convinience when plot using function <code>multi_plot</code> specified below.</p><p><code>hour_opf_modified</code> is of the same format regrading the input and output. It is only for testing purposes.</p><h6 id="Arguments:-2"><a class="docs-heading-anchor" href="#Arguments:-2">Arguments:</a><a class="docs-heading-anchor-permalink" href="#Arguments:-2" title="Permalink"></a></h6><ul><li><code>month_st, day_st, period_st, month_en, day_en, period_en</code>: the time points to specify tim periods for plotting</li><li><code>folder::String:</code>: the directory containing all subnetwork data, subnetworks.csv, interfaces.csv</li><li><code>subne_folder</code>: the number of subnet that is to be optimized (which directs to the sub-folder containing its data)</li><li><code>output_folder</code>: the folder specified to save the output files</li><li><code>plot_results::Bool = true</code>: choice of plot the optimization result (optimal value vs time points) directly after optimization, default false</li></ul><p>Below are the similar arguments as <code>multifrequency-opf</code>:</p><ul><li><code>obj::String</code>: the objective function to use, from the following:<ul><li>&quot;mincost&quot;: minimize generation cost</li><li>&quot;areagen&quot;: minimize generation in the areas specified in <code>gen_areas</code></li><li>&quot;minredispatch&quot;: minimize the change in generator dispatch from the initial values defined in the network data</li></ul></li><li><code>gen_areas</code>: integer array of all areas in which generation should be minimized if <code>obj==&quot;mincost&quot;</code></li><li><code>area_transfer</code>: two areas with power transfer between them that should be saved and plotted. Results for P, Q, S, and loss are saved for power transfer between the two areas. Must have exactly two elements.</li><li><code>print_results::Bool</code>: if true, print the optimization results</li></ul><h6 id="Examples:"><a class="docs-heading-anchor" href="#Examples:">Examples:</a><a id="Examples:-1"></a><a class="docs-heading-anchor-permalink" href="#Examples:" title="Permalink"></a></h6><pre><code class="nohighlight hljs">hour_opf(1, 1, 1, 1, 1, 3, &quot;./time_series&quot;, &quot;br10&quot;, &quot;./time_series_out&quot;, &quot;mincost&quot;, false, false)</code></pre><p>This example runs optimization for 3 hours at the beginning of the year. The case is branch 10, the input files are from folder <code>./time_series</code> and output to <code>./time_series_out</code>. This is the same for <code>hour_opf_modified</code></p><h5 id=".2.-hour*opf*regularized:"><a class="docs-heading-anchor" href="#.2.-hour*opf*regularized:">2.2. hour<em>opf</em>regularized:</a><a id=".2.-hour*opf*regularized:-1"></a><a class="docs-heading-anchor-permalink" href="#.2.-hour*opf*regularized:" title="Permalink"></a></h5><pre><code class="nohighlight hljs">function hour_opf(month_st, day_st, period_st, month_en, day_en, period_en,
      folder:: String,
      subnet_folder:: String,
      output_folder::String,
      obj::String,
      gen_areas = [],
      area_transfer = [],
      plot_results::Bool = true,
      print_results::Bool = false
      regularize_f::Float64=0.0,
      ipopt_max_iter::Int64=20000)</code></pre><p>Similar structure as <code>hour_opf</code>, but added 2 more arguments. This function is performing optimization with regularization on the optimal frequency. Larger the differences between the optimal frequency and 60 Hz (the original frequency), larger the penalty. Below are the additional arguments:</p><ul><li><code>regularize_f</code>: the coefficient of regularizer.</li><li><code>ipopt_max_iter</code>: the amount of iterations of the server when solving each time point.</li></ul><h6 id="Examples:-2"><a class="docs-heading-anchor" href="#Examples:-2">Examples:</a><a class="docs-heading-anchor-permalink" href="#Examples:-2" title="Permalink"></a></h6><pre><code class="nohighlight hljs">hour_opf_regularized(1, 1, 1, 1, 1, 3, &quot;./time_series&quot;, &quot;br10&quot;, &quot;./time_series_out&quot;, &quot;mincost&quot;, false, false, 1e0, 20000)</code></pre><p>This example runs optimization for 3 hours at the beginning of the year. The case is branch 10, the input files are from folder <code>./time_series</code> and output to <code>./time_series_out</code>. The regularizer is 1e0 and the maximum number of iterations of the solver is 20000.</p><h5 id=".-multi*plot-(same-for-multi*plot_new):"><a class="docs-heading-anchor" href="#.-multi*plot-(same-for-multi*plot_new):">3. multi<em>plot (same for multi</em>plot_new):</a><a id=".-multi*plot-(same-for-multi*plot_new):-1"></a><a class="docs-heading-anchor-permalink" href="#.-multi*plot-(same-for-multi*plot_new):" title="Permalink"></a></h5><pre><code class="nohighlight hljs">function multi_plot(month_st, day_st, period_st, month_en, day_en, period_en, br_arr_raw, folder, output_folder,
      plot_choice::String = &quot;single&quot;)</code></pre><p>The function uses the period of plotting, the information of networks to plot (the output files from hour<em>opf or other data files of similar data structures) and choice of plotting. It is flexible on the types of plots, the range to plot and the data sets to investigate. Separate plot from the process of running the data can help to improve the efficiency. The input folder is the output folder of the `hour</em>opf`.</p><h6 id="Arguments:-3"><a class="docs-heading-anchor" href="#Arguments:-3">Arguments:</a><a class="docs-heading-anchor-permalink" href="#Arguments:-3" title="Permalink"></a></h6><ul><li><code>month_st, day_st, period_st, month_en, day_en, period_en</code>: the start and end time for the period of data to plot</li><li><code>br_arr_raw</code>: the array containg the indexex of subnets to plot (in format of <code>Int64</code>). If using the <code>single</code> for <code>plot_choice</code>, the function only reads in the first index of network if the choice is single.</li><li><code>folder</code>: the target folder containg the data files for plot (is the folder containing the output of the <code>hour_opf</code>)</li><li><code>output_folder</code>: the folder specified to save the output files</li><li><code>plot_choice::String = &quot;single&quot;</code>: default <code>single</code>,<ul><li>&quot;single&quot;: some plots of a single upgrade in a time period: optimal result &amp; frequency of a network, improvements compared to the base case</li><li>&quot;compare&quot;: comparisons of several upgrades on different aspects: average optimal cost; improvement rates; histogram of improvement rates</li></ul></li></ul><h6 id="Examples:-3"><a class="docs-heading-anchor" href="#Examples:-3">Examples:</a><a class="docs-heading-anchor-permalink" href="#Examples:-3" title="Permalink"></a></h6><pre><code class="nohighlight hljs">multi_plot(8, 1, 1, 8, 15, 24, [12 24 41 119], &quot;time_series_out&quot;, &quot;time_series_out&quot;, &quot;compare&quot;)</code></pre><p>This plots the comparison of histogram of improvement rates of several upgrades. The result plot is shown as below.</p><p>&lt;img src=&quot;opt<em>rate</em>comp.png&quot;  height=&quot;600&quot;&gt;</p><p>A complete example for the whole process from parse to optimize to plot is:</p><pre><code class="nohighlight hljs"># Here I run the whole year data for default, then I have all the data and don&#39;t need to run it for other periods in the future
hour_opf(1, 1, 1, 12, 31, 24, &quot;./time_series&quot;, &quot;br10&quot;, &quot;./time_series_out&quot;, &quot;mincost&quot;, false, false)     

# In this function I set the input folder of multi_plot to be the output folder of the hour_opf.
# The specified time period is 8.1.1 - 8.15.24 and the subnetx number is 10.
multi_plot(8, 1, 1, 8, 15, 24, [10], &quot;time_series_out&quot;, &quot;time_series_out&quot;, &quot;single&quot;)                     </code></pre></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Monday 15 November 2021 04:55">Monday 15 November 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
